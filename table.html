<!doctype html>
<html lang="ru">
<head>
    <!-- Кодировка веб-страницы -->
    <meta charset="utf-8">
    <!-- Настройка viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- jQuery -->
    <script defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Popper (необходим для работы некоторых компонентов Bootstrap 4, таких как Dropdown и др.) -->
    <script defer src="js/popper.min.js"></script>
    <!-- Bootstrap JS -->
    <script defer src="js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="js/getFunctions.js"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script>
        $(document).ready(function() {
            $.ajax({
                url: 'https://pandawok.guprint.ru/machine/list',
                type: "get",
                dataType: "json",

                success: function (result) {
                    drawTable(result.result);
                }
            });

            function drawTable(result) {
                for (var i = 0; i < result.length; i++) {
                    drawRow(result[i]);
                }
            }

            function drawRow(result) {
                var row = $("<tr />")
                $("#table").append(row);
                row.append($("<td>" + result.id + "</td>"));
                row.append($("<td>" + result.name + "</td>"));
                row.append($("<td>" + result.currentUserName + "</td>"));
                for (var i = 0; i < result.availableButtons.length; ++i){
                    row.append($("<td><button>"+result.availableButtons[i].buttonName+"</button></td>"));
                }
            }
        });
    </script>

</head>
<body>

<table id="table">

</table>

</body>
</html>